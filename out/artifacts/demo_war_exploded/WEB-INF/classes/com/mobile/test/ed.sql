# 创建员工使用设备表drop table Ed;create table Ed (  Eid char(9),  Did char(5),  primary key (Eid,Did),  foreign key (Eid) references Employee(Eid),  foreign key (Did) references Device(Did));select * from Ed;# 插入一些数据insert into Ed values ('201500799','85203');insert into Ed values ('201500789','85103');insert into Ed values ('201500789','85104');insert into Ed values ('201500797','85105');insert into Ed values ('951200101','85107');insert into Ed values ('951200102','85108');insert into Ed values ('951200103','85109');insert into Ed values ('951200104','85111');insert into Ed values ('951200105','85112');insert into Ed values ('201500788','85305');insert into Ed values ('201500789','85306');insert into Ed values ('201500789','85303');insert into Ed values ('201500797','85301');insert into Ed values ('201500788','85400');insert into Ed values ('201500789','85401');insert into Ed values ('201500789','85402');insert into Ed values ('201500797','85403');insert into Ed values ('951200101','85404');insert into Ed values ('951200102','85405');insert into Ed values ('951200103','85406');insert into Ed values ('951200104','85407');insert into Ed values ('951200105','85408');insert into Ed values ('951200106','85410');insert into Ed values ('951200107','85412');insert into Ed values ('951200108','85414');insert into Ed values ('951200109','85416');insert into Ed values ('951200110','85418');delete from Ed where Did ='85105';select  * from Ed;# 获取员工预约设备的数量drop procedure getDeviceCount;delimiter //create procedure getEdCount(  in eid varchar(9),  out counts int)  begin    select count(*) into counts from Ed where Ed.Eid = eid;  end //delimiter ;# 测试set @cc='201500788';set @dd=0;call getEdCount(@cc,@dd);select @cc,@dd;# 获取某员工正在使用的所有设备的iddrop procedure getEdIds;delimiter //create procedure getEds( in eid varchar(9), in ss int, in ee int)  begin    select * from Ed where Ed.Eid = eid limit ss,ee;  end //delimiter ;# 测试call getEds('201500788',0,10);delete from Ed where  Ed.Did='85203';# 根据员工号和设备号查找该设备是否在使用设备delimiter //create procedure findEd (  in eid varchar(9),  in did varchar(5))  begin    select * from Ed where Ed.Eid = eid and Ed.Did = did;  end //delimiter ;call findEd('201500797','85301');# 增加一带设备delimiter //create procedure insertEd(  in eid varchar(9),  in did varchar(5))  begin    insert into Ed values (eid,did);  end //delimiter ;# 暂时不要更新delimiter //create procedure updateEd(  in did varchar(5))  begin    update Device set Dname = dname,Dplace = dplace,                      Dstatus = dstatus where Did = did;  end //delimiter ;# 删除一台设备delimiter //create procedure deleteEd(  in eid varchar(9),  in did varchar(5))  begin    delete from Ed where Ed.Eid = eid and Ed.Did = did;  end //delimiter ;