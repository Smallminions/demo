package com.mobile.servlet.device;import com.mobile.model.Device;import com.mobile.util.DaoFactory;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;@WebServlet(name = "UpdateDeviceServlet", urlPatterns = {"/UpdateDeviceServlet"})public class UpdateDeviceServlet extends HttpServlet {    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        dosomething(request,response);    }    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        dosomething(request,response);    }    protected void dosomething(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        request.setCharacterEncoding("UTF-8");        response.setCharacterEncoding("UTF-8");        String id = request.getParameter("sdid");        String did = request.getParameter("deviceid");        String dname = request.getParameter("devicekind");        String dplace = request.getParameter("devicearea");        String dstatus = request.getParameter("using");        Device device = null;        if(did==null){//取搜索设备ID            device = DaoFactory.getDeviceDao().getDevice(id);            request.setAttribute("device",device);            request.getRequestDispatcher("/deviceupdate.jsp").forward(request, response);        } else{ //一般不可能出现            device = DaoFactory.getDeviceDao().getDevice(did);            device.setDplace(dplace);            if(DaoFactory.getDeviceDao().updateDevice(device)){                request.getRequestDispatcher("/device.jsp").forward(request, response);            }else{                request.setAttribute("point", "对不起,设备更新失败！！！");                request.getRequestDispatcher("/point.jsp").forward(request, response);            }        }    }}