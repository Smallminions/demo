package com.mobile.servlet.employee;import com.mobile.model.Employee;import com.mobile.util.DaoFactory;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;@WebServlet(name = "DeleteEmployeeServlet",urlPatterns = {"/DeleteEmployeeServlet"})public class DeleteEmployeeServlet extends HttpServlet {    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        dosomething(request,response);    }    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        dosomething(request,response);    }    protected void dosomething(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {        String deid = request.getParameter("deid");        String ceid = request.getParameter("ceid");        String oldpwd = request.getParameter("pwd1");        String newpwd = request.getParameter("pwd2");        if(oldpwd==null&&newpwd==null) {            if (deid != null) { //删除该条信息                if (DaoFactory.getEmployeeDao().deleteEmployee(deid)) {                    request.getRequestDispatcher("DisplayEmployeeServlet").forward(request, response);                } else {                    request.setAttribute("point", "对不起,员工信息删除失败！！！");                    request.getRequestDispatcher("/point.jsp").forward(request, response);                }            } else { //重置密码操作                Employee employee = DaoFactory.getEmployeeDao().getEmployee(ceid);                employee.setEpwd(employee.getEid());                if (DaoFactory.getEmployeeDao().updateEmployee(employee)) {                    request.getRequestDispatcher("/DisplayEmployeeServlet").forward(request, response);                } else {                    request.setAttribute("point", "对不起,员工密码重置失败失败！！！");                    request.getRequestDispatcher("/point.jsp").forward(request, response);                }            }        }else{ //重置密码操作            Employee employee =(Employee) request.getSession(false).getAttribute("user");            if(employee.getEpwd().equals(oldpwd)) {                String userid = employee.getEid();                employee = DaoFactory.getEmployeeDao().getEmployee(userid);                employee.setEpwd(newpwd);                if (DaoFactory.getEmployeeDao().updateEmployee(employee)) {                    request.getRequestDispatcher("/login.jsp").forward(request, response);                } else {                    request.setAttribute("point", "对不起,员工密码修改失败失败！！！");                    request.getRequestDispatcher("/point.jsp").forward(request, response);                }            }else{                request.setAttribute("point", "对不起,初始密码不正确,请联系管理员！！！");                request.getRequestDispatcher("/point.jsp").forward(request, response);            }        }    }}